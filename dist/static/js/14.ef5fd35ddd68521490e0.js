webpackJsonp([14],{EV1k:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),o=s("L6bb"),i=s.n(o),r=s("SJI6"),u={name:"login",data:function(){return{username:"",password:"",ip:""}},methods:n()({getIp:function(){var e=this;this.$ajax.get("/ipApi").then(function(t){200!==t.status&&"OK"!==t.statusText||(e.ip=t.data.ip)}).catch(function(e){})},login:function(){var e=this;return""===this.username||""===this.password?(this.$message({message:"请输入正确用户名或密码",type:"warning"}),!1):this.password.length<6?(this.$message({message:"密码不少于6位",type:"warning"}),!1):void this.$ajax.post("/api/platform/login",{userName:this.username,password:i()(this.password),ip:this.ip}).then(function(t){"200"===t.data.code?(e.setUserInfo(t.data.data),e.setUserToken(t.headers.accesstoken),localStorage.setItem("__userNamePlat__",e.username),localStorage.setItem("__userPw__",e.password),e.$message({message:"登录成功,页面跳转中...",type:"success",onClose:function(){e.$router.push({path:"/home"})}})):e.$message({message:t.data.message,type:"warning"})}).catch(function(t){e.$message.error("服务器错误！")})}},Object(r.mapActions)(["setUserInfo","setUserToken"])),mounted:function(){this.getIp(),localStorage.getItem("__userNamePlat__")&&(this.username=localStorage.getItem("__userNamePlat__")),localStorage.getItem("__userPw__")&&(this.password=localStorage.getItem("__userPw__"))}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"logo"}),e._v(" "),s("div",{staticClass:"cont"},[s("div",{staticClass:"board"},[s("h2",[e._v("登 录")]),e._v(" "),s("div",{staticClass:"inputCont",on:{keyup:function(t){if(!("button"in t)&&13!==t.keyCode)return null;e.login(t)}}},[s("div",{staticClass:"input"},[s("span",{staticClass:"el-icon-edit"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"输入账号"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"input"},[s("span",{staticClass:"el-icon-edit-outline"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"输入登录密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("button",{on:{click:e.login}},[e._v("登 录")])])])])])},staticRenderFns:[]};var c=s("VU/8")(u,l,!1,function(e){s("e/E9")},"data-v-3eb3fee5",null);t.default=c.exports},"e/E9":function(e,t){}});
//# sourceMappingURL=14.ef5fd35ddd68521490e0.js.map