webpackJsonp([7],{EV1k:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Dd8w"),n=t.n(a),i=t("L6bb"),o=t.n(i),r=t("SJI6"),u={name:"login",data:function(){return{username:"",password:"",ip:""}},methods:n()({getIp:function(){var e=this;this.$ajax.get("/ipApi").then(function(s){200!==s.status&&"OK"!==s.statusText||(e.ip=s.data.ip)}).catch(function(e){})},login:function(){var e=this;return""===this.username||""===this.password?(this.$message({message:"请输入正确用户名或密码",type:"warning"}),!1):this.password.length<6?(this.$message({message:"密码不少于6位",type:"warning"}),!1):void this.$ajax.post("/api/platform/login",{userName:this.username,password:o()(this.password),ip:this.ip}).then(function(s){"200"===s.data.code?(e.setUserInfo(s.data.data),e.setUserToken(s.headers.accesstoken),e.$message({message:"登录成功,页面跳转中...",type:"success",onClose:function(){e.$router.push({path:"/home"})}})):e.$message({message:s.data.message,type:"warning"})}).catch(function(s){e.$message.error("服务器错误！")})}},Object(r.mapActions)(["setUserInfo","setUserToken"])),mounted:function(){this.getIp()}},p={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login"},[t("div",{staticClass:"logo"}),e._v(" "),t("div",{staticClass:"cont"},[t("div",{staticClass:"board"},[t("h2",[e._v("登 录")]),e._v(" "),t("div",{staticClass:"inputCont",on:{keyup:function(s){if(!("button"in s)&&13!==s.keyCode)return null;e.login(s)}}},[t("div",{staticClass:"input"},[t("span",{staticClass:"el-icon-edit"}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"输入账号"},domProps:{value:e.username},on:{input:function(s){s.target.composing||(e.username=s.target.value)}}})]),e._v(" "),t("div",{staticClass:"input"},[t("span",{staticClass:"el-icon-edit-outline"}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"输入登录密码"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}})]),e._v(" "),t("button",{on:{click:e.login}},[e._v("登 录")])])])])])},staticRenderFns:[]};var c=t("VU/8")(u,p,!1,function(e){t("iGp7")},"data-v-4e17a886",null);s.default=c.exports},iGp7:function(e,s){}});
//# sourceMappingURL=7.45f06e900f705d3e6b75.js.map